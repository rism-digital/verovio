<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>
			Dynamic demo
		</title>
		<script src="../build/verovio.js" type="text/javascript"></script>
		<script type="text/javascript">
//<![CDATA[
		//convertMusic = Module.cwrap('convertMusic', 'string', ['integer', 'integer', 'string'])
		convertMusic = Module.cwrap('convertMusic', 'string', ['string', 'string'])
		
		function render( mei )
		{	
			// The trailing newline is needed so we can read the file lines
			// correctly if the file does not end with a newline
			var svg = convertMusic(mei + "\n", , JSON.stringify({inputFormat: 'mei', scale: 50, pageHeight: 250, pageWidth: 2000}));
			document.getElementById('test').innerHTML = svg;
		};
//]]>
		</script>
	</head>
	<body>
		<p>
			Dynamic input demo
		</p>
		<div id="test"></div>
		<form onsubmit="render(texty.value); return false">
			<textarea rows="50" cols="200" name="texty"></textarea>
			<input type="submit" value="Go!" />
		</form>
	</body>
</html>
